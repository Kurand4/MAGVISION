//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop
#include <math.h>

#include "TrackUnit.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma link "Chart"
#pragma link "DBChart"
#pragma link "Series"
#pragma link "TeEngine"
#pragma link "TeeProcs"
#pragma resource "*.dfm"
TTrackForm *TrackForm;
//---------------------------------------------------------------------------
__fastcall TTrackForm::TTrackForm(TComponent* Owner) 	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TTrackForm::CloseButtonClick(TObject *Sender)
{
	Close();
}
//---------------------------------------------------------------------------
void  TTrackForm::ClearTrack()
{
	Series_Track->Clear();
	FirstPointSeries->Clear();
	MarkerSeries->Clear();
	FirstPointSeries->Clear();

//	L_StartLat->Caption = "";
//	L_StartLng->Caption = "";
//	Edit_Way->Text = "";
//	Label_dLat->Caption      = "";
//	Label_dLng->Caption      = "";
//	L_CoordCount->Caption    = "";
//	L_BadCoordCount->Caption = "";

//	CoordCount 		= 0;
//	BadCoordCount = 0;
//	dSumLat 		=		0;
//	dSumLng 		= 	0;
//	MaxLat			= -90;
//	MinLat			=	 90;
//	MaxLng			=	-180;
//	MinLng			=  180;
}
//---------------------------------------------------------------------------
void TTrackForm::SetIniCoordAxis(double d_long, double d_lat)
{
	Chart_Track->LeftAxis->Automatic 		= false;
	Chart_Track->BottomAxis->Automatic 	= false;
	Chart_Track->LeftAxis->Maximum 			= d_lat + LATSTEP;
	Chart_Track->LeftAxis->Minimum 			= d_lat - LATSTEP;
	Chart_Track->BottomAxis->Maximum 		= d_long + LATSTEP*1.5;///LatCoeff;
	Chart_Track->BottomAxis->Minimum 		= d_long - LATSTEP*1.5;///LatCoeff;
}
//---------------------------------------------------------------------------
void TTrackForm::SetCoordAxis(double d_long, double d_lat)
{
	if (fabs(Chart_Track->LeftAxis->Maximum - d_lat) < LATSTEP*0.01)
		Chart_Track->LeftAxis->Maximum += LATSTEP;
	if (fabs(Chart_Track->LeftAxis->Minimum - d_lat) < LATSTEP*0.01)
		Chart_Track->LeftAxis->Minimum -= LATSTEP;
	if (fabs(Chart_Track->BottomAxis->Maximum - d_long) < LATSTEP*0.01)
		Chart_Track->BottomAxis->Maximum += LATSTEP*1.5;///LatCoeff;
	if (fabs(Chart_Track->BottomAxis->Minimum - d_long) < LATSTEP*0.01)
		Chart_Track->BottomAxis->Minimum -= LATSTEP*1.5;///LatCoeff;
}
//---------------------------------------------------------------------------

